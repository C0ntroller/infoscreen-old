<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Infoscreen</title>
  <link rel="stylesheet" type="text/css" href="src/css/style.css">
  <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>

<body style="background-image:url('src/img/bg/0.jpg');">
  <div id="quoteContainer" class="container"></div>
  <div id="dateWeatherContainer" class="container">
      <span id="clock"></span>
      <span id="date"></span>
      <div id="weatherIcon"></div>
      <span id="temperature"></span>
      <span id="currentWeatherInfos"></span>
      <table id="futureWeatherInfos">
        <tr>
            <td colspan="2" class="futureWeatherHeader"></td>
            <td colspan="2" class="futureWeatherHeader"></td>
            <td colspan="2" class="futureWeatherHeader"></td>
            <td colspan="2" class="futureWeatherHeader"></td>
        </tr>
        <tr>
            <td rowspan="2" class="futureWeatherIcon"></td>
            <td class="futureWeatherHighTemp"></td>
            <td rowspan="2" class="futureWeatherIcon" style="border-left: 1px solid var(--iconColor);"></td>
            <td class="futureWeatherHighTemp"></td>
            <td rowspan="2" class="futureWeatherIcon" style="border-left: 1px solid var(--iconColor);"></td>
            <td class="futureWeatherHighTemp"></td>
            <td rowspan="2" class="futureWeatherIcon" style="border-left: 1px solid var(--iconColor);"></td>
            <td class="futureWeatherHighTemp"></td>
        </tr>
        <tr>
            <td class="futureWeatherLowTemp"></td>
            <td class="futureWeatherLowTemp"></td>
            <td class="futureWeatherLowTemp"></td>
            <td class="futureWeatherLowTemp"></td>
        </tr>
      </table>
  </div>
  <div id="calendarContainer" class="container"></div>
  <div id="radarContainer" class="container">
      <img id="radar" src="https://www.dwd.de/DWD/wetter/radar/radfilm_sac_akt.gif" />
      <img id="radar-night" src="src/img/pikachu.gif" style="display: none";/>
  </div>
  <div id="dvbMonitorContainer" class="container">
      <table id="dvbTable0"></table>
      <table id="dvbTable1"></table>
  </div>
  <div id="spotifyContainer" class="container">
      <div id="spotify0" class="spotifyContent">
          <div></div><span style='font-size:200%'>Hier l√§uft gerade nichts...</span>
      </div>
  </div>
  <div id="newsContainer" class="container"><div id="newsContainerInner"></div></div>

  <script>      
      const CalendarContainer = require("./src/js/CalendarContainer.js");
      const DvbContainer = require("./src/js/DvbContainer.js");
      const NewsContainer = require("./src/js/NewsContainer.js");
      const QuoteContainer = require("./src/js/QuoteContainer.js");
      //const SpotifyContainer = require("./src/js/SpotifyContainer.js");
      const VolumIOContainer = require("./src/js/VolumIOContainer.js");
      const WeatherContainer = require("./src/js/WeatherContainer.js");
      const TimeAndBg = require("./src/js/TimeAndBg.js");

      var containerStash = {
          interval_30s: {
              items: [],
              timeInSec: 30*1000
          },
          interval_15min: {
              items: [],
              timeInSec: 15*60*1000
          },
          interval_24h: {
              items: [],
              timeInSec: 24*60*60*1000
          }
        }
      containerStash.interval_30s.items.push(new DvbContainer(0));
      containerStash.interval_30s.items.push(new DvbContainer(1));
      //containerStash.interval_30s.items.push(new SpotifyContainer(0));
      containerStash.interval_15min.items.push(new CalendarContainer());
      containerStash.interval_15min.items.push(new NewsContainer());
      containerStash.interval_15min.items.push(new WeatherContainer());
      containerStash.interval_24h.items.push(new QuoteContainer());
      var volumio = new VolumIOContainer(0);
      var time = new TimeAndBg(3);

      for(var interval in containerStash) {
        containerStash[interval].items.forEach(element => {
            element.requestData();
            setInterval(
                function(){
                    element.requestData()
                }.bind(element), 
                containerStash[interval].timeInSec);
          });
      }
  </script>
  </body>
</html>